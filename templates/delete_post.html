{% extends "base.html" %}

{% block extra_css %}
<style>
/* Page-specific modal CSS */
body {
  font-family: Arial, Helvetica, sans-serif;
}

/* Buttons */
button {
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  cursor: pointer;
  width: 100%;
  opacity: 0.9;
}

button:hover {
  opacity: 1;
}

/* Cancel and Delete buttons */
.cancelbtn, .deletebtn {
  float: left;
  width: 50%;
}

.cancelbtn {
  background-color: #ccc;
  color: black;
}

.deletebtn {
  background-color: #f44336;
  color: white;
}

/* Container inside modal */
.modal-container {
  padding: 16px;
  text-align: center;
}

/* The Modal (background) */
.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.6); /* semi-transparent */
  padding-top: 50px;
}

/* Modal content box */
.modal-content {
  background-color: #fefefe;
  margin: 10% auto;
  border: 1px solid #888;
  width: 400px;
  border-radius: 8px;
  position: relative;
}

/* Close button */
.close {
  position: absolute;
  right: 15px;
  top: 10px;
  font-size: 28px;
  font-weight: bold;
  color: #aaa;
}

.close:hover,
.close:focus {
  color: #f44336;
  cursor: pointer;
}

/* Responsive buttons */
@media screen and (max-width: 400px) {
  .cancelbtn, .deletebtn {
    width: 100%;
    float: none;
  }
}
</style>
{% endblock %}

{% block contents %}
<h2>Delete Post</h2>

<!-- Button to open modal -->
<button id="openModalBtn" class="btn btn-danger">Delete Post</button>

<!-- Modal HTML -->
<div id="deleteModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <div class="modal-container">
      <h3>Confirm Delete</h3>
      <p>Are you sure you want to delete <strong>"{{ post.title }}"</strong>?</p>

      <div class="clearfix">
        <form method="POST" style="display:inline;">
          {% csrf_token %}
          <button type="submit" name="confirm_delete" class="deletebtn">Yes</button>
        </form>
        <button class="cancelbtn" id="cancelBtn">No</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Get modal elements
const modal = document.getElementById("deleteModal");
const openBtn = document.getElementById("openModalBtn");
const closeBtn = document.querySelector(".close");
const cancelBtn = document.getElementById("cancelBtn");

// Open modal
openBtn.onclick = function() {
  modal.style.display = "block";
}

// Close modal when clicking X
closeBtn.onclick = function() {
  modal.style.display = "none";
}

// Close modal when clicking No
cancelBtn.onclick = function() {
  modal.style.display = "none";
}

// Close modal when clicking outside the modal content
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
</script>
{% endblock %}
